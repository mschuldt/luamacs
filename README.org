Luamacs -- Emacs with Lua

Luamacs is is a result of merging the Emacs-lisp and Lua interpreters.
Each of the interpreters can lookup values and call functions
the from the other one.
They have each been extended with a new data type that allows them to
manipulate references to values in the others environment.

Quick demo:

;;create a lua function that prints a tables field:
(lua-eval "function ff(x) 
              return x.val
            end")

;;define a lua table
(lua-eval "tbl = {val = 'lua string'}")

;;store the lua table in an e-lisp variable
(setq z lua.tbl)
==> #<Lua table at 0x9e71e80>

;; call the lua function from emacs 
(lua.ff z)
==> "lua string"

;; Or refer to the table referenced from Emacs.
(lua-eval "v = ff(el.z)")

;; then reference the result from emacs:
(concat lua.v " + emacs string")
==> "lua string + emacs string"

;;referencing non-valid lisp names from lua:
(setq +illegal-var?! "does it work?")
(lua-eval "ok = el['+illegal-var?!'] .. ' YES!'")
lua.ok
==> "does it work? YES!"

;;storing oisp objects in lua:
(setq this_buff (current-buffer))
(lua-eval "b = el.this_buff")
(buffer-name lua.b)
==> "*scratch*"

Running tests:
   (require 'luamacs-tests)
   M-x luamacs-run-tests

